<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>The Wind in the Willows - Reading Aloud</title>
<style>
  body {
    font-size: 3em;
    font-weight: bold;
    font-family: Arial, sans-serif;
    margin: 1em;
    line-height: 1.2;
  }
  #text {
    max-width: 600px;
    margin: 0 auto;
  }
  .word {
    text-decoration: underline;
    cursor: pointer;
    position: relative;
    color: black;
  }
  .highlighted {
    background-color: yellow;
  }
  #popup {
    position: absolute;
    max-width: 600px;
    width: 100%;
    background: #f0f0f0;
    border: 3px solid #333;
    padding: 0.5em 1em 1em 1em;
    box-sizing: border-box;
    z-index: 1000;
    font-weight: normal;
    font-size: 0.4em;
    color: #000;
    border-radius: 8px;
  }
  #popup h2 {
    margin-top: 0;
    margin-bottom: 0.3em;
    font-size: 0.5em;
    font-weight: bold;
  }
  #popup button {
    position: absolute;
    top: 0.1em;
    right: 0.3em;
    font-size: 0.5em;
    font-weight: bold;
    background: transparent;
    border: none;
    cursor: pointer;
  }
  #popup ul {
    padding-left: 1.2em;
    margin-top: 0.3em;
  }
  #popup ul li {
    margin-bottom: 0.15em;
  }
</style>
</head>
<body>
<div id="text">
  <span class="word" data-word="Mole">Mole</span> 
  <span class="word" data-word="was">was</span> 
  <span class="word" data-word="cleaning">cleaning</span> 
  <span class="word" data-word="his">his</span> 
  <span class="word" data-word="little">little</span> 
  <span class="word" data-word="home">home</span> 
  <span class="word" data-word="when">when</span> 
  <span class="word" data-word="he">he</span> 
  <span class="word" data-word="suddenly">suddenly</span> 
  <span class="word" data-word="felt">felt</span> 
  <span class="word" data-word="tired">tired</span> 
  <span class="word" data-word="of">of</span> 
  <span class="word" data-word="it">it</span> 
  <span class="word" data-word="all">all</span>. 
  <span class="word" data-word="He">He</span> 
  <span class="word" data-word="had">had</span> 
  <span class="word" data-word="been">been</span> 
  <span class="word" data-word="working">working</span> 
  <span class="word" data-word="hard">hard</span> 
  <span class="word" data-word="all">all</span> 
  <span class="word" data-word="morning">morning</span> 
  <span class="word" data-word="and">and</span> 
  <span class="word" data-word="now">now</span> 
  <span class="word" data-word="he">he</span> 
  <span class="word" data-word="wanted">wanted</span> 
  <span class="word" data-word="to">to</span> 
  <span class="word" data-word="see">see</span> 
  <span class="word" data-word="the">the</span> 
  <span class="word" data-word="world">world</span> 
  <span class="word" data-word="outside">outside</span>. 
  <span class="word" data-word="He">He</span> 
  <span class="word" data-word="put">put</span> 
  <span class="word" data-word="down">down</span> 
  <span class="word" data-word="his">his</span> 
  <span class="word" data-word="cleaning">cleaning</span> 
  <span class="word" data-word="tools">tools</span> 
  <span class="word" data-word="and">and</span> 
  <span class="word" data-word="made">made</span> 
  <span class="word" data-word="his">his</span> 
  <span class="word" data-word="way">way</span> 
  <span class="word" data-word="up">up</span> 
  <span class="word" data-word="the">the</span> 
  <span class="word" data-word="tunnel">tunnel</span> 
  <span class="word" data-word="to">to</span> 
  <span class="word" data-word="the">the</span> 
  <span class="word" data-word="outside">outside</span>. 
  <span class="word" data-word="The">The</span> 
  <span class="word" data-word="sunshine">sunshine</span> 
  <span class="word" data-word="was">was</span> 
  <span class="word" data-word="bright">bright</span> 
  <span class="word" data-word="and">and</span> 
  <span class="word" data-word="warm">warm</span> 
  <span class="word" data-word="on">on</span> 
  <span class="word" data-word="his">his</span> 
  <span class="word" data-word="fur">fur</span>. 
  <span class="word" data-word="Mole">Mole</span> 
  <span class="word" data-word="had">had</span> 
  <span class="word" data-word="never">never</span> 
  <span class="word" data-word="seen">seen</span> 
  <span class="word" data-word="so">so</span> 
  <span class="word" data-word="much">much</span> 
  <span class="word" data-word="green">green</span> 
  <span class="word" data-word="grass">grass</span> 
  <span class="word" data-word="and">and</span> 
  <span class="word" data-word="blue">blue</span> 
  <span class="word" data-word="sky">sky</span> 
  <span class="word" data-word="before">before</span>. 
  <span class="word" data-word="He">He</span> 
  <span class="word" data-word="walked">walked</span> 
  <span class="word" data-word="and">and</span> 
  <span class="word" data-word="walked">walked</span> 
  <span class="word" data-word="until">until</span> 
  <span class="word" data-word="he">he</span> 
  <span class="word" data-word="came">came</span> 
  <span class="word" data-word="to">to</span> 
  <span class="word" data-word="the">the</span> 
  <span class="word" data-word="river">river</span>, 
  <span class="word" data-word="something">something</span> 
  <span class="word" data-word="he">he</span> 
  <span class="word" data-word="had">had</span> 
  <span class="word" data-word="never">never</span> 
  <span class="word" data-word="seen">seen</span> 
  <span class="word" data-word="in">in</span> 
  <span class="word" data-word="his">his</span> 
  <span class="word" data-word="life">life</span>. 
  <span class="word" data-word="The">The</span> 
  <span class="word" data-word="water">water</span> 
  <span class="word" data-word="sparkled">sparkled</span> 
  <span class="word" data-word="in">in</span> 
  <span class="word" data-word="the">the</span> 
  <span class="word" data-word="sun">sun</span> 
  <span class="word" data-word="as">as</span> 
  <span class="word" data-word="it">it</span> 
  <span class="word" data-word="flowed">flowed</span> 
  <span class="word" data-word="past">past</span>. 
  <span class="word" data-word="Mole">Mole</span> 
  <span class="word" data-word="was">was</span> 
  <span class="word" data-word="so">so</span> 
  <span class="word" data-word="happy">happy</span> 
  <span class="word" data-word="that">that</span> 
  <span class="word" data-word="he">he</span> 
  <span class="word" data-word="sat">sat</span> 
  <span class="word" data-word="down">down</span> 
  <span class="word" data-word="on">on</span> 
  <span class="word" data-word="the">the</span> 
  <span class="word" data-word="bank">bank</span> 
  <span class="word" data-word="to">to</span> 
  <span class="word" data-word="watch">watch</span> 
  <span class="word" data-word="the">the</span> 
  <span class="word" data-word="water">water</span> 
  <span class="word" data-word="and">and</span> 
  <span class="word" data-word="the">the</span> 
  <span class="word" data-word="animals">animals</span> 
  <span class="word" data-word="that">that</span> 
  <span class="word" data-word="lived">lived</span> 
  <span class="word" data-word="there">there</span>.
</div>

<div id="popup" style="display:none;">
  <button id="closeBtn">X</button>
  <h2 id="popupWord"></h2>
  <p id="definition"></p>
  <ul id="examples"></ul>
</div>

<script>
  const wordsData = {
    "Mole": {
      definition: "A small animal that lives underground and digs tunnels.",
      examples: [
        "The mole digs tunnels under the ground.",
        "Mole likes to stay in his little home.",
        "A mole has soft black fur.",
        "Mole was curious about the outside world.",
        "The mole found a new place to live.",
        "Mole is a kind and shy animal."
      ]
    },
    "was": {
      definition: "Used to talk about something that happened before now.",
      examples: [
        "He was happy yesterday.",
        "The sky was blue this morning.",
        "She was tired after the game.",
        "It was cold last night.",
        "The dog was barking loudly.",
        "I was at home all day."
      ]
    },
    "cleaning": {
      definition: "Making something free from dirt or mess.",
      examples: [
        "She is cleaning her room.",
        "We are cleaning the table.",
        "He spent the day cleaning the house.",
        "Cleaning is important to stay healthy.",
        "They are cleaning the park.",
        "Mom is cleaning the dishes."
      ]
    },
    "his": {
      definition: "Belonging to a boy or man.",
      examples: [
        "This is his book.",
        "He lost his hat.",
        "His dog is very friendly.",
        "I like his new shoes.",
        "His bike is red.",
        "He took his coat."
      ]
    },
    "little": {
      definition: "Small in size or amount.",
      examples: [
        "She has a little cat.",
        "The little boy is playing.",
        "I have a little toy car.",
        "The little bird sings sweetly.",
        "He gave me a little gift.",
        "The little house is cozy."
      ]
    },
    "home": {
      definition: "The place where someone lives.",
      examples: [
        "I am going home now.",
        "Her home is very nice.",
        "We like to be at home.",
        "The dog ran back home.",
        "Home is where the heart is.",
        "He cleaned his home."
      ]
    },
    "when": {
      definition: "At the time that.",
      examples: [
        "Call me when you arrive.",
        "I was happy when I saw you.",
        "She cried when she fell.",
        "We eat when we are hungry.",
        "He laughed when he heard the joke.",
        "When will you come?"
      ]
    },
    "he": {
      definition: "Used to talk about a boy or man.",
      examples: [
        "He is my friend.",
        "He likes to play outside.",
        "He is very kind.",
        "He went to school.",
        "He has a big smile.",
        "He helps his family."
      ]
    },
    "suddenly": {
      definition: "Happening quickly without warning.",
      examples: [
        "Suddenly, it started to rain.",
        "She suddenly ran away.",
        "The dog suddenly barked.",
        "He suddenly felt tired.",
        "Suddenly, the lights went out.",
        "They suddenly stopped talking."
      ]
    },
    "felt": {
      definition: "To have a feeling or emotion.",
      examples: [
        "I felt happy today.",
        "She felt cold outside.",
        "He felt tired after the game.",
        "They felt scared in the dark.",
        "We felt warm by the fire.",
        "I felt sad when it rained."
      ]
    },
    "tired": {
      definition: "Feeling like you need to rest or sleep.",
      examples: [
        "I am tired after playing.",
        "She felt tired at night.",
        "He was tired from running.",
        "The dog looks tired.",
        "We get tired after school.",
        "They felt tired after the trip."
      ]
    },
    "of": {
      definition: "Used to show what something belongs to or is about.",
      examples: [
        "A cup of water.",
        "The color of the sky.",
        "A friend of mine.",
        "The sound of the birds.",
        "A piece of cake.",
        "The door of the house."
      ]
    },
    "it": {
      definition: "Used to talk about a thing or animal already known.",
      examples: [
        "It is raining.",
        "I like it very much.",
        "The cat is small; it is cute.",
        "It is time to eat.",
        "Put it on the table.",
        "It is cold outside."
      ]
    },
    "all": {
      definition: "Every one or the whole amount.",
      examples: [
        "All the children are here.",
        "I ate all the cookies.",
        "She loves all animals.",
        "All the lights are on.",
        "We are all friends.",
        "He gave all his toys away."
      ]
    },
    "had": {
      definition: "Used to show something happened before now.",
      examples: [
        "I had a dog.",
        "She had lunch early.",
        "He had a big smile.",
        "They had fun at the park.",
        "We had a good time.",
        "The cat had a nap."
      ]
    },
    "been": {
      definition: "Used to talk about something that happened before now.",
      examples: [
        "I have been happy.",
        "She has been busy.",
        "They have been friends.",
        "We have been outside.",
        "He has been tired.",
        "It has been cold."
      ]
    },
    "working": {
      definition: "Doing a job or task.",
      examples: [
        "He is working hard.",
        "She is working in the garden.",
        "They are working together.",
        "I am working on my homework.",
        "The man is working now.",
        "We were working all day."
      ]
    },
    "hard": {
      definition: "With a lot of effort or strength.",
      examples: [
        "She works hard every day.",
        "He tried hard to win.",
        "They worked hard on the project.",
        "The rain fell hard.",
        "I study hard for tests.",
        "The wind blew hard."
      ]
    },
    "morning": {
      definition: "The first part of the day before noon.",
      examples: [
        "I wake up in the morning.",
        "The sun shines in the morning.",
        "We eat breakfast in the morning.",
        "She goes to school in the morning.",
        "The birds sing in the morning.",
        "Morning is a fresh start."
      ]
    },
    "and": {
      definition: "Used to join two words or ideas.",
      examples: [
        "I like apples and oranges.",
        "She runs and jumps.",
        "We have a dog and a cat.",
        "He sings and dances.",
        "The sun is bright and warm.",
        "They play and learn."
      ]
    },
    "now": {
      definition: "At this time.",
      examples: [
        "I am here now.",
        "She is eating now.",
        "We go outside now.",
        "He is sleeping now.",
        "It is raining now.",
        "Now is a good time."
      ]
    },
    "wanted": {
      definition: "Wished to have or do something.",
      examples: [
        "I wanted a toy.",
        "She wanted to play.",
        "He wanted some food.",
        "They wanted to go home.",
        "We wanted to see the movie.",
        "The dog wanted a bone."
      ]
    },
    "to": {
      definition: "Used to show direction or purpose.",
      examples: [
        "Go to school.",
        "I want to eat.",
        "She came to play.",
        "We walked to the park.",
        "He likes to read.",
        "They ran to the house."
      ]
    },
    "see": {
      definition: "To use your eyes to look at something.",
      examples: [
        "I see a bird.",
        "She can see the stars.",
        "He wants to see the movie.",
        "We see the sun.",
        "They see the river.",
        "Can you see me?"
      ]
    },
    "the": {
      definition: "Used before a noun to show something specific.",
      examples: [
        "The cat is sleeping.",
        "I like the red ball.",
        "She saw the dog.",
        "We went to the park.",
        "He opened the door.",
        "The sun is bright."
      ]
    },
    "world": {
      definition: "The earth and all the places and people on it.",
      examples: [
        "We live in the world.",
        "The world is big.",
        "She wants to see the world.",
        "Animals live all over the world.",
        "The world has many countries.",
        "He learns about the world."
      ]
    },
    "outside": {
      definition: "The area that is not inside a building or place.",
      examples: [
        "We play outside.",
        "The sun is outside.",
        "She went outside to run.",
        "It is cold outside.",
        "The birds sing outside.",
        "He likes to be outside."
      ]
    },
    "put": {
      definition: "To move something to a place.",
      examples: [
        "Put the book on the table.",
        "She put on her shoes.",
        "He put the toy away.",
        "They put the food in the box.",
        "I put the pen down.",
        "We put the chair here."
      ]
    },
    "down": {
      definition: "From a higher place to a lower place.",
      examples: [
        "He sat down.",
        "Put the box down.",
        "The ball rolled down the hill.",
        "She looked down.",
        "The bird flew down.",
        "We walked down the street."
      ]
    },
    "tools": {
      definition: "Things used to help do work or fix things.",
      examples: [
        "He uses tools to build.",
        "She has many tools in the box.",
        "The hammer is a tool.",
        "We need tools to fix the car.",
        "They carry tools to work.",
        "Tools help us do jobs."
      ]
    },
    "made": {
      definition: "Created or did something.",
      examples: [
        "She made a cake.",
        "He made a toy.",
        "They made a big mess.",
        "I made a card for you.",
        "We made a sandcastle.",
        "The bird made a nest."
      ]
    },
    "way": {
      definition: "A path or road to go somewhere.",
      examples: [
        "This is the way home.",
        "He found a new way.",
        "We walked all the way.",
        "She showed me the way.",
        "The way is long.",
        "They lost their way."
      ]
    },
    "up": {
      definition: "From a lower place to a higher place.",
      examples: [
        "He climbed up the hill.",
        "She looked up at the sky.",
        "The balloon went up.",
        "We went up the stairs.",
        "The sun came up.",
        "The bird flew up."
      ]
    },
    "tunnel": {
      definition: "A long, narrow passage underground or through a hill.",
      examples: [
        "The train goes through the tunnel.",
        "He walked in the tunnel.",
        "The tunnel is dark inside.",
        "They found a secret tunnel.",
        "The mole lives in a tunnel.",
        "The tunnel is very long."
      ]
    },
    "sunshine": {
      definition: "The light and heat that comes from the sun.",
      examples: [
        "The sunshine is warm.",
        "She likes the sunshine.",
        "We played in the sunshine.",
        "The sunshine made the flowers grow.",
        "The sunshine is bright today.",
        "He felt happy in the sunshine."
      ]
    },
    "bright": {
      definition: "Giving a lot of light or shining strongly.",
      examples: [
        "The sun is bright.",
        "She has bright eyes.",
        "The room is bright with light.",
        "He wore a bright shirt.",
        "The stars are bright at night.",
        "The bright colors are pretty."
      ]
    },
    "warm": {
      definition: "Having a comfortable or nice heat.",
      examples: [
        "The blanket is warm.",
        "She feels warm in the sun.",
        "The soup is warm.",
        "It is warm outside today.",
        "He likes warm weather.",
        "The fire is warm and bright."
      ]
    },
    "fur": {
      definition: "The soft hair that covers some animals.",
      examples: [
        "The cat has soft fur.",
        "The bear's fur is thick.",
        "She petted the dog's fur.",
        "The rabbit's fur is white.",
        "The mole has black fur.",
        "The fur keeps animals warm."
      ]
    },
    "never": {
      definition: "Not at any time.",
      examples: [
        "I never eat candy before dinner.",
        "She never goes to bed late.",
        "He never forgets his keys.",
        "They never play in the rain.",
        "We never saw a tiger.",
        "The mole had never seen the river."
      ]
    },
    "seen": {
      definition: "Looked at or noticed something.",
      examples: [
        "I have seen a rainbow.",
        "She has seen the movie.",
        "He has seen many animals.",
        "We have seen the stars.",
        "They have seen the river.",
        "Mole had never seen so much green grass."
      ]
    },
    "so": {
      definition: "To a very great degree.",
      examples: [
        "I am so happy.",
        "She is so tired.",
        "The water is so cold.",
        "He runs so fast.",
        "They are so kind.",
        "Mole was so happy."
      ]
    },
    "much": {
      definition: "A large amount or number.",
      examples: [
        "I have much to do.",
        "She has much fun.",
        "He eats so much food.",
        "We see much green grass.",
        "They have much water.",
        "Mole had never seen so much blue sky."
      ]
    },
    "green": {
      definition: "The color of grass and leaves.",
      examples: [
        "The grass is green.",
        "She likes green apples.",
        "The leaves are green in spring.",
        "He wore a green shirt.",
        "The frog is green.",
        "Mole saw green grass."
      ]
    },
    "grass": {
      definition: "The green plants that cover the ground outside.",
      examples: [
        "The grass is soft.",
        "We sit on the grass.",
        "The dog runs on the grass.",
        "She waters the grass.",
        "The grass is green and bright.",
        "Mole walked on the grass."
      ]
    },
    "blue": {
      definition: "The color of the sky on a clear day.",
      examples: [
        "The sky is blue.",
        "She has blue eyes.",
        "He wore a blue hat.",
        "The water looks blue.",
        "The bird has blue feathers.",
        "Mole saw blue sky."
      ]
    },
    "sky": {
      definition: "The space above the earth where clouds and the sun are.",
      examples: [
        "The sky is bright.",
        "Birds fly in the sky.",
        "The stars shine in the sky.",
        "Clouds move across the sky.",
        "The sky is blue today.",
        "Mole looked up at the sky."
      ]
    },
    "before": {
      definition: "Earlier than now or something else.",
      examples: [
        "I ate before school.",
        "She came before me.",
        "He saw the movie before dinner.",
        "We played outside before lunch.",
        "The sun set before night.",
        "Mole had never seen this before."
      ]
    },
    "walked": {
      definition: "Moved by putting one foot in front of the other.",
      examples: [
        "He walked to school.",
        "She walked in the park.",
        "They walked home together.",
        "I walked slowly.",
        "The dog walked beside me.",
        "Mole walked until he came to the river."
      ]
    },
    "until": {
      definition: "Up to the time that.",
      examples: [
        "Wait until I come back.",
        "She stayed until dark.",
        "He worked until noon.",
        "We played until it rained.",
        "They walked until the river.",
        "Mole walked until he came to the river."
      ]
    },
    "came": {
      definition: "Moved to a place.",
      examples: [
        "He came to the party.",
        "She came home early.",
        "They came to see us.",
        "I came to school on time.",
        "The dog came to me.",
        "Mole came to the river."
      ]
    },
    "river": {
      definition: "A large, flowing body of water.",
      examples: [
        "The river is wide.",
        "Fish live in the river.",
        "We like to watch the river.",
        "The river flows fast.",
        "Boats sail on the river.",
        "Mole saw the river for the first time."
      ]
    },
    "something": {
      definition: "A thing that is not named or known.",
      examples: [
        "I want something to eat.",
        "She heard something outside.",
        "He found something on the ground.",
        "We saw something in the sky.",
        "They need something to play with.",
        "Mole saw something new."
      ]
    },
    "life": {
      definition: "The state of being alive.",
      examples: [
        "We enjoy life.",
        "She loves life outside.",
        "He learns about life every day.",
        "The animals live a happy life.",
        "Life is full of surprises.",
        "Mole had never seen this in his life."
      ]
    },
    "water": {
      definition: "The clear liquid we drink and that fills rivers and lakes.",
      examples: [
        "Water is wet.",
        "She drinks water every day.",
        "The river has clean water.",
        "Fish live in water.",
        "We swim in the water.",
        "The water sparkled in the sun."
      ]
    },
    "sparkled": {
      definition: "Shined with small bright flashes of light.",
      examples: [
        "The stars sparkled at night.",
        "The water sparkled in the sun.",
        "Her eyes sparkled with joy.",
        "The snow sparkled in the light.",
        "The jewels sparkled on the ring.",
        "The fire sparkled in the dark."
      ]
    },
    "as": {
      definition: "Used to show something happens at the same time or in the same way.",
      examples: [
        "She sang as she worked.",
        "The sun set as the stars came out.",
        "He ran as fast as he could.",
        "The water sparkled as it flowed.",
        "I smiled as I saw you.",
        "The bird flew as the wind blew."
      ]
    },
    "flowed": {
      definition: "Moved like a stream or river.",
      examples: [
        "The river flowed gently.",
        "Water flowed down the hill.",
        "The milk flowed into the cup.",
        "The wind flowed through the trees.",
        "The paint flowed on the paper.",
        "The water flowed past the bank."
      ]
    },
    "past": {
      definition: "Going by something or someone.",
      examples: [
        "We walked past the house.",
        "The car drove past the school.",
        "She ran past the playground.",
        "The river flowed past the trees.",
        "He looked past the crowd.",
        "The boat sailed past the shore."
      ]
    },
    "happy": {
      definition: "Feeling good and smiling because of something nice.",
      examples: [
        "She is happy today.",
        "He felt happy with his gift.",
        "They were happy to play outside.",
        "I am happy to see you.",
        "The dog looks happy.",
        "Mole was so happy by the river."
      ]
    },
    "sat": {
      definition: "Moved down to rest on a chair, the ground, or something else.",
      examples: [
        "He sat on the chair.",
        "She sat by the window.",
        "They sat down to eat.",
        "I sat on the grass.",
        "The cat sat on the mat.",
        "Mole sat down on the bank."
      ]
    },
    "bank": {
      definition: "The side of a river or lake.",
      examples: [
        "We sat on the river bank.",
        "The bank has green grass.",
        "She walked along the bank.",
        "The birds live near the bank.",
        "The boat stopped at the bank.",
        "Mole watched the water from the bank."
      ]
    },
    "watch": {
      definition: "To look at something carefully.",
      examples: [
        "I watch the birds fly.",
        "She watches the river flow.",
        "They watch the stars at night.",
        "He watches the fish swim.",
        "We watch the sun set.",
        "Mole watched the animals."
      ]
    },
    "animals": {
      definition: "Living creatures that are not plants or people.",
      examples: [
        "Dogs and cats are animals.",
        "She likes to see animals at the zoo.",
        "The animals live in the forest.",
        "We feed the animals in the park.",
        "The river has many animals.",
        "Mole saw animals by the river."
      ]
    },
    "that": {
      definition: "Used to show a specific thing or person.",
      examples: [
        "I like that book.",
        "She saw that bird.",
        "He knows that man.",
        "We want that toy.",
        "The dog that barks is loud.",
        "Mole watched the animals that lived there."
      ]
    },
    "lived": {
      definition: "Had a home or place to stay.",
      examples: [
        "The cat lived in the house.",
        "She lived near the river.",
        "They lived in a big city.",
        "He lived in a small town.",
        "The animals lived in the forest.",
        "Mole watched the animals that lived there."
      ]
    },
    "there": {
      definition: "In or at that place.",
      examples: [
        "The book is there on the table.",
        "She is there by the door.",
        "We went there yesterday.",
        "He lives there now.",
        "The animals live there by the river.",
        "Mole watched the animals that lived there."
      ]
    }
  };

  const textDiv = document.getElementById('text');
  const popup = document.getElementById('popup');
  const popupWord = document.getElementById('popupWord');
  const definitionP = document.getElementById('definition');
  const examplesUl = document.getElementById('examples');
  const closeBtn = document.getElementById('closeBtn');

  let currentHighlighted = null;

  function clearHighlight() {
    if (currentHighlighted) {
      currentHighlighted.classList.remove('highlighted');
      currentHighlighted = null;
    }
    popup.style.display = 'none';
  }

  function showPopup(wordSpan) {
    clearHighlight();
    currentHighlighted = wordSpan;
    wordSpan.classList.add('highlighted');

    const word = wordSpan.getAttribute('data-word');
    const data = wordsData[word];

    if (!data) return;

    popupWord.textContent = word;
    definitionP.textContent = data.definition;
    examplesUl.innerHTML = '';
    data.examples.forEach(example => {
      const li = document.createElement('li');
      li.textContent = example;
      examplesUl.appendChild(li);
    });

    popup.style.display = 'block';

    // Position popup below the word, centered horizontally relative to text container
    const textRect = textDiv.getBoundingClientRect();
    const wordRect = wordSpan.getBoundingClientRect();

    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
    const scrollLeft = window.pageXOffset || document.documentElement.scrollLeft;

    const popupWidth = textRect.width;
    popup.style.width = popupWidth + 'px';

    // Calculate left so popup is aligned with text container left edge
    const left = textRect.left + scrollLeft;

    // Calculate top just below the word
    const top = wordRect.bottom + scrollTop + 5;

    popup.style.left = left + 'px';
    popup.style.top = top + 'px';

    // Scroll popup into view if needed (especially on small screens)
    const popupRect = popup.getBoundingClientRect();
    if (popupRect.bottom > window.innerHeight) {
      window.scrollBy(0, popupRect.bottom - window.innerHeight + 20);
    }
  }

  textDiv.addEventListener('click', (e) => {
    if (e.target.classList.contains('word')) {
      if (e.target === currentHighlighted) {
        clearHighlight();
      } else {
        showPopup(e.target);
      }
    }
  });

  closeBtn.addEventListener('click', () => {
    clearHighlight();
  });

  // Close popup if clicking outside
  document.addEventListener('click', (e) => {
    if (!popup.contains(e.target) && !e.target.classList.contains('word')) {
      clearHighlight();
    }
  });
</script>
</body>
</html>
